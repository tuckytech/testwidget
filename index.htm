<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Widget Page</title>
<script>
window.addEventListener('message', (event) => {
    var eventDataParsed = JSON.parse(event.data.WorkflowAPICall);
    console.log("body" + eventDataParsed.body);
    switch (eventDataParsed.endpoint) {
        case "open-widgetpopup":
            console.log("Entered case 'open-popup'");
            document.getElementById("widgetpopup").height = "100%";
            document.getElementById("widgetpopup").width = "100%";
            document.getElementById("widgetpopup").style.position = "fixed";
            document.getElementById("widgetpopup").style.left = "50%";
            document.getElementById("widgetpopup").style.top = "50%";
            document.getElementById("widgetpopup").style.right = "0";
            document.getElementById("widgetpopup").style.bottom = "0";
            document.getElementById("widgetpopup").style.transform = "translate(-50%, -50%)";
            document.getElementById("widgetpopup").style.backgroundColor = "rgba(0,0,0,.4)";
            document.getElementById("widgetpopup").style.zIndex = "9999999999999999";
            break;
        case "close-popup":
            console.log("Entered case 'close-widgetpopup'");
            document.getElementById("widgetpopup").height = "40px";
            document.getElementById("widgetpopup").width = "150px";
            document.getElementById("widgetpopup").style.position = "relative";
            document.getElementById("widgetpopup").style.left = "inherit";
            document.getElementById("widgetpopup").style.top = "inherit";
            document.getElementById("widgetpopup").style.right = "inherit";
            document.getElementById("widgetpopup").style.bottom = "inherit";
            document.getElementById("widgetpopup").style.transform = "none";
            document.getElementById("widgetpopup").style.backgroundColor = "rgba(1,1,1,0)";
            document.getElementById("widgetpopup").style.zIndex = "1";
            break;
    }
}, false);
</script>

</head>
<body>
    <!-- Iframe with the widget -->
<script type="text/javascript"> 

url = parent.document.URL; 

document.write('<iframe id="widgetpopup" style="margin: 0px auto; display: block;" xml="lang" src="https://greenthechain.com/version-test/widget2/1730179417198x962409578276585500?websiteSourceURL=' + url + '/" width="400" height="476" frameborder="0" scrolling="no"></iframe>');

</script>
</body>
</html>
